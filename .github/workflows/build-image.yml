name: Build Code
on:
    workflow_dispatch:
    push:
        branches:
            - master
jobs:
    clean:
        uses: ./.github/workflows/npm-command.yml@master
        with:
            command-name: Clean
            npm-command: npm run clean
    lint:
        needs: clean
        if: success()
        runs-on: ubuntu-latest
        steps:
            - name: Get Code
              uses: actions/checkout@v4
            - name: Set-up Node
              uses: actions/setup-node@v4
            - name: Install Dependencies
              run: npm ci
            - name: Run Lint
              run: npm run lint
    build:
        needs: lint
        if: success()
        runs-on: ubuntu-latest
        steps:
            - name: Get Code
              uses: actions/checkout@v4
            - name: Set-up Node
              uses: actions/setup-node@v4
            - name: Install Dependencies
              run: npm ci
            - name: Run Build
              run: npm run build